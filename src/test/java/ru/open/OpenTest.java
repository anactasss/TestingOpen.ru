package ru.open;

import org.testng.Assert;
import org.testng.annotations.Test;
import static com.codeborne.selenide.Selenide.*;

public class OpenTest {

    @Test
    public void exchangeRates() {

        OpenPageFactory exchangeRatesPageFactory = open("https://www.google.com/", OpenPageFactory.class);

        exchangeRatesPageFactory.searchText("Открытие");

        boolean hasLink = false;
        for (int i = 0; i < exchangeRatesPageFactory.getLinks().size(); i++) {
            if (exchangeRatesPageFactory.getLinks().get(i).getText().equals("www.open.ru")) {
                hasLink = true;
            }
        }
        Assert.assertTrue(hasLink);

        exchangeRatesPageFactory.goToOpenPage();

        Assert.assertTrue(Double.parseDouble(exchangeRatesPageFactory.exchangeCheck()
                .get(1)
                .getText()
                .replaceAll(",", "\\.")) >
                Double.parseDouble(exchangeRatesPageFactory.exchangeCheck()
                        .get(0)
                        .getText()
                        .replaceAll(",", "\\.")) &&
                Double.parseDouble(exchangeRatesPageFactory.exchangeCheck()
                        .get(3)
                        .getText()
                        .replaceAll(",", "\\.")) >
                        Double.parseDouble(exchangeRatesPageFactory.exchangeCheck()
                                .get(2)
                                .getText()
                                .replaceAll(",", "\\.")));
    }
}
